<!DOCTYPE html>
<html lang="es">

<!--
    Página Principal (Dashboard)
    Aquí sucede toda la magia: ver usuarios, chatear y gestionar mensajes.
-->

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inicio - SchoolConnect</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Contenedor principal que organiza los tres paneles de la aplicación -->
    <div class="contenedor">

        <!-- PANEL IZQUIERDO: LISTA DE USUARIOS Y GRUPOS -->
        <div class="panel-izquierdo">
            <div class="panel-header">
                <h3>Usuarios</h3>
            </div>
            <ul id="lista-usuarios" class="lista-scroll">
                <!-- Los usuarios se cargan dinámicamente -->
            </ul>

            <div class="panel-header"
                style="margin-top: 20px; display: flex; justify-content: space-between; align-items: center;">
                <h3>Grupos</h3>
                <button id="btn-crear-grupo" class="btn-small" title="Crear grupo">+</button>
            </div>
            <ul id="lista-grupos" class="lista-scroll">
                <!-- Los grupos se cargan dinámicamente -->
            </ul>
        </div>


        <!-- PANEL CENTRAL: CHAT Y MENSAJES -->
        <div class="panel-central">
            <!-- Barra superior con el título y el saludo al usuario -->
            <div class="top-bar">
                <div class="chat-info">
                    <h1 id="app-title" class="clickable-title">SchoolConnect</h1>
                    <span id="chat-subtitulo" class="chat-context">Canal General</span>
                </div>
                <div class="header-right">
                    <span id="current-user" class="user-greeting"></span>
                    <!-- Botón hamburguesa solo visible en móviles -->
                    <button id="btn-toggle-menu" class="btn-icon mobile-only">☰</button>
                </div>
            </div>

            <!-- Área donde aparecen los mensajes -->
            <div id="area-mensajes">
                <div class="empty-message-container">
                    Selecciona "Redactar" para enviar un mensaje.
                </div>
            </div>

            <!-- Área de redacción (oculta por defecto hasta pulsar Redactar) -->
            <div class="box-redactar hidden" id="seccion-redactar">
                <input type="text" id="input-mensaje" class="input-mensaje" placeholder="Escribe un mensaje...">
                <button id="btn-enviar" class="btn-enviar">Enviar</button>
                <button id="btn-borrador" class="btn-enviar"
                    style="background-color: #95a5a6; margin-left: 5px;">Borrador</button>
            </div>
        </div>


        <!-- PANEL DERECHO: FILTROS Y ACCIONES -->
        <div class="panel-derecho">
            <button class="botones principal" id="btn-redactar">Redactar</button>

            <!-- Botones de filtro para ver distintos tipos de mensajes -->
            <button class="botones activo" id="filter-todos">Todos</button>
            <button class="botones" id="filter-enviados">Enviados</button>
            <button class="botones" id="filter-borradores">Borradores</button>
            <button class="botones" id="filter-destacados">Destacar</button>
            <button class="botones" id="filter-papelera">Papelera</button>

            <button class="botones btn-logout-custom" id="btn-logout">Cerrar Sesión</button>
        </div>


        <!-- MENÚ CONTEXTUAL (FLOTANTE) -->
        <!-- Aparece al hacer clic en los tres puntos de un mensaje -->
        <div id="context-menu" class="hidden">
            <div class="context-menu-item" id="ctx-destacar">Destacar</div>
            <div class="context-menu-item delete" id="ctx-borrar-mi">Borrar para mí</div>
            <div class="context-menu-item delete" id="ctx-borrar-todos">Borrar para todos</div>
        </div>

        <!-- MODAL CREAR GRUPO -->
        <div id="modal-grupo" class="modal hidden">
            <div class="modal-content">
                <h2>Crear Nuevo Grupo</h2>
                <input type="text" id="input-nombre-grupo" placeholder="Nombre del grupo (ej. Trabajo Final)"
                    class="input-modal">
                <p>Selecciona miembros:</p>
                <div id="lista-seleccion-usuarios" class="lista-seleccion">
                    <!-- Checkboxes de usuarios generados con JS -->
                </div>
                <div class="modal-actions">
                    <button id="btn-cancelar-grupo" class="btn-cancelar">Cancelar</button>
                    <button id="btn-confirmar-grupo" class="btn-confirmar">Crear Grupo</button>
                </div>
            </div>
        </div>
        <!-- Contenedor para notificaciones internas (Toasts) -->
        <div id="notification-container" class="notification-container"></div>
    </div>

    <!-- Script principal -->
    <script src="script.js"></script>
</body>

</html>